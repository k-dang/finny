# CLI Workspace Guidelines

## Scope

These instructions apply to `apps/cli` only. For monorepo-wide rules, use the root `AGENTS.md`.

## Project Structure

- `src/index.ts`: CLI entrypoint and parse bootstrap.
- `src/cli/`: root program configuration.
- `src/commands/`: subcommand registration.
- `src/chat/`: interactive chat runtime, agent, and helpers.
- `src/chat/tools/`: individual tool definitions and shared tool exports.
- `dist/`: build output generated by Bun.
- `package.json`: scripts, bin mapping, and dependency declarations.
- `tsconfig.json`: TypeScript compiler settings for this workspace.
- `eslint.config.js`: lint configuration for this workspace.
- `README.md`: end-user usage notes for the CLI.

Keep CLI logic inside `apps/cli`. Do not add web-app-specific conventions or references here.

## Build, Lint, and Typecheck

Run from `apps/cli`:

- `bun run dev`: run the CLI entrypoint directly.
- `bun run build`: compile `src/index.ts` to `dist/`.
- `bun run check-types`: run TypeScript checks with no emit.
- `bun run lint`: run ESLint with zero warnings allowed.

Optional from repo root:

- `bun run dev --filter=cli`
- `bun run build --filter=cli`
- `bun run check-types --filter=cli`
- `bun run lint --filter=cli`

## Coding Conventions

- Use TypeScript with ESM modules and Bun runtime compatibility.
- Use `commander` for command routing, options, help/version output, and parse errors.
- Keep `src/index.ts` minimal; place command behavior in `src/commands` and runtime logic in focused modules.
- Define chat tools in separate files under `src/chat/tools` and re-export them from `src/chat/tools/index.ts`.
- Keep `chat` output clean by default; reserve step/tool telemetry for explicit verbose mode (`--verbose` or `/verbose on`).
- When changing behavior, update `README.md` and this file's behavior contract in the same change.

## Validation Checklist

For every CLI change, run:

1. `bun run lint`
2. `bun run check-types`
3. `bun run dev --filter=cli`
4. `bun run dev --filter=cli -- --help`
